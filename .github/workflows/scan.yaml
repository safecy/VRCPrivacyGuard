name: ğŸ¦  VirusTotal

on:
  release:
    types: [published]

env:
  CARGO_TERM_COLOR: always

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v1
      - name: ğŸ› ï¸ Build
        run: cargo build --release --verbose
      - name: ğŸ¦  VirusTotal Scan
        uses: crazy-max/ghaction-virustotal@v4
        with:
          vt_api_key: ${{ secrets.VT_API_KEY }}
          update_release_body: true
          files: |
            target/release/VRCPrivacyGuard.exe